(self.webpackChunkmeeku_fork=self.webpackChunkmeeku_fork||[]).push([[76],{8429:(Ae,it,u)=>{"use strict";u.r(it),u.d(it,{STIMULUS_CASE:()=>Qt,StudyModule:()=>ef});var p=u(2057),s=u(4788),yt=u(2895),U=u(7639),R=u(9765),Q=(u(6215),u(7574),u(6682),u(5435)),st=u(8307);const y={provide:s.tb,useFactory:function(t,i){return()=>{if((0,p.NF)(i)){const e=Array.from(t.querySelectorAll(`[class*=${D}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${D}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(n,"")})}}},deps:[p.K0,s.Lbi],multi:!0},D="flex-layout-";let G=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[y]}),t})();const Ot={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},q=new s.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Ot}),rt=new s.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),Ce=new s.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});u(9490),u(6782),u(1211);let xi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[G]]}),t})();var It=u(6794);let wi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[G,It.vT]]}),t})(),Ri=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[G]]}),t})(),At=(()=>{class t{constructor(e,n){(0,p.PM)(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:q,useValue:Object.assign(Object.assign({},Ot),e)},{provide:Ce,useValue:n,multi:!0},{provide:rt,useValue:!0}]:[{provide:q,useValue:Object.assign(Object.assign({},Ot),e)},{provide:Ce,useValue:n,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(rt),s.LFG(s.Lbi))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[wi,xi,Ri],wi,xi,Ri]}),t})();var ot=u(933),lt=u(2414),at=u(7935),el=u(1439),il=u(5917),De=u(5257),nl=u(9761),be=u(9642),S=u(6083),Gi=u(3328),Ei=u(2371);function sl(t,i){}class Fe{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const rl={dialogContainer:(0,S.X$)("dialogContainer",[(0,S.SB)("void, exit",(0,S.oB)({opacity:0,transform:"scale(0.7)"})),(0,S.SB)("enter",(0,S.oB)({transform:"none"})),(0,S.eR)("* => enter",(0,S.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,S.oB)({transform:"none",opacity:1}))),(0,S.eR)("* => void, * => exit",(0,S.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,S.oB)({opacity:0})))])};let ol=(()=>{class t extends lt.en{constructor(e,n,r,o,l,a){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=l,this._focusMonitor=a,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(d)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=(0,be.ht)(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,be.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=(0,be.ht)();return e===n||e.contains(n)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(Ei.qV),s.Y36(s.sBO),s.Y36(p.K0,8),s.Y36(Fe),s.Y36(Ei.tE))},t.\u0275dir=s.lG2({type:t,viewQuery:function(e,n){if(1&e&&s.Gf(lt.Pl,7),2&e){let r;s.iGM(r=s.CRH())&&(n._portalOutlet=r.first)}},features:[s.qOj]}),t})(),ll=(()=>{class t extends ol{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=s.n5z(t)))(n||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&s.WFA("@dialogContainer.start",function(o){return n._onAnimationStart(o)})("@dialogContainer.done",function(o){return n._onAnimationDone(o)}),2&e&&(s.Ikx("id",n._id),s.uIk("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),s.d8E("@dialogContainer",n._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&s.YNc(0,sl,0,0,"ng-template",0)},directives:[lt.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[rl.dialogContainer]}}),t})(),al=0;class Ct{constructor(i,e,n="mat-dialog-"+al++){this._overlayRef=i,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new R.xQ,this._afterClosed=new R.xQ,this._beforeClosed=new R.xQ,this._state=0,e._id=n,e._animationStateChanged.pipe((0,Q.h)(r=>"opened"===r.state),(0,De.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,Q.h)(r=>"closed"===r.state),(0,De.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),i.keydownEvents().pipe((0,Q.h)(r=>r.keyCode===Gi.hY&&!this.disableClose&&!(0,Gi.Vb)(r))).subscribe(r=>{r.preventDefault(),Te(this,"keyboard")}),i.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Te(this,"mouse")})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe((0,Q.h)(e=>"closing"===e.state),(0,De.q)(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(i){let e=this._getPositionStrategy();return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(i="",e=""){return this._overlayRef.updateSize({width:i,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(i){return this._overlayRef.addPanelClass(i),this}removePanelClass(i){return this._overlayRef.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Te(t,i,e){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=i),t.close(e)}const Wt=new s.OlP("MatDialogData"),dl=new s.OlP("mat-dialog-default-options"),Oi=new s.OlP("mat-dialog-scroll-strategy"),ul={provide:Oi,deps:[ot.aV],useFactory:function(t){return()=>t.scrollStrategies.block()}};let gl=(()=>{class t{constructor(e,n,r,o,l,a,d,g,m){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=l,this._dialogRefConstructor=d,this._dialogContainerType=g,this._dialogDataToken=m,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new R.xQ,this._afterOpenedAtThisLevel=new R.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,el.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,nl.O)(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){(n=function(t,i){return Object.assign(Object.assign({},i),t)}(n,this._defaultOptions||new Fe)).id&&this.getDialogById(n.id);const r=this._createOverlay(n),o=this._attachDialogContainer(r,n),l=this._attachDialogContent(e,o,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),o._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new ot.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const o=s.zs3.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:Fe,useValue:n}]}),l=new lt.C5(this._dialogContainerType,n.viewContainerRef,o,n.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,n,r,o){const l=new this._dialogRefConstructor(r,n,o.id);if(e instanceof s.Rgc)n.attachTemplatePortal(new lt.UE(e,null,{$implicit:o.data,dialogRef:l}));else{const a=this._createInjector(o,l,n),d=n.attachComponentPortal(new lt.C5(e,o.viewContainerRef,a));l.componentInstance=d.instance}return l.updateSize(o.width,o.height).updatePosition(o.position),l}_createInjector(e,n,r){const o=e&&e.viewContainerRef&&e.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!o||!o.get(It.Is,null,s.XFs.Optional))&&l.push({provide:It.Is,useValue:{value:e.direction,change:(0,il.of)()}}),s.zs3.create({parent:o||this._injector,providers:l})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let o=n[r];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(ot.aV),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(ot.Xj),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},t.\u0275dir=s.lG2({type:t}),t})(),z=(()=>{class t extends gl{constructor(e,n,r,o,l,a,d){super(e,n,o,a,d,l,Ct,ll,Wt)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(ot.aV),s.LFG(s.zs3),s.LFG(p.Ye,8),s.LFG(dl,8),s.LFG(Oi),s.LFG(t,12),s.LFG(ot.Xj))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),hl=0,ml=(()=>{class t{constructor(e,n,r){this._dialogRef=e,this._elementRef=n,this._dialog=r,this.id="mat-dialog-title-"+hl++}ngOnInit(){this._dialogRef||(this._dialogRef=function(t,i){let e=t.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?i.find(n=>n.id===e.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ct,8),s.Y36(s.SBq),s.Y36(z))},t.\u0275dir=s.lG2({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(e,n){2&e&&s.Ikx("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),t})(),pl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.lG2({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),t})();let wt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[z,ul],imports:[[ot.U8,lt.eL,at.BQ],at.BQ]}),t})(),yl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,at.si]]}),t})(),xl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,at.si]]}),t})(),vl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,At]]}),t})(),Pt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,U.QW,yl,xl,vl]]}),t})(),Al=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,At,wt,Pt]]}),t})(),Jt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,at.si]]}),t})(),Cl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Jt,p.ez,At,wt,Pt]]}),t})(),wl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Jt,p.ez,At,wt,Pt]]}),t})(),_l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Jt,p.ez,At,wt,Pt]]}),t})(),Sl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Jt,p.ez,At,wt,Pt]]}),t})();var Dl=u(7012);const Bi=function(t){var i=t.length;return i?t[(0,Dl.Z)(0,i-1)]:void 0};var Ii=u(2258);const Tl=function(t){return Bi((0,Ii.Z)(t))};var _t=u(4654);const Yt=function(t){return((0,_t.Z)(t)?Bi:Tl)(t)},Me=["RWK","PGZ","QGK","FNK","ZVB","PWU","PLJ","KNF","GVW","KXL","GRQ","WPQ","BQP","FXX","ZTF","SGG","GQF","VXO","DZF","ZHD","JHH","VQP","JXY","ZVS","HGD","FJX","VHK","JTP","JTS","UHJ","WTZ","CXF","XFH","LWK","NWK","ZRG","FDG","NQC","WPW","YVR","HLJ","WBX","VGH","KXW","XAQ","WQG","DGJ","QUZ","QZX","HWL","DKX","ZDW","RZJ","VGJ","VWL","MKP","JFJ","GQY","BRX","IHG","YVP","SXG","FJC","QKU","WZY","QHJ","YTZ","RHF","YYB","QFH","ZUX","TQT","VZZ","BTQ","DHQ","XLW","VLW","VZJ","GGK","SWK","UFH","GPN","JSX","IQP","QUP","XDG","QWN","CBK","JVH","VXG","YBF","BVY","QZW","UPZ","WMX","XVN","RRX","QTX","DZN","WXP"],ki={lower:"lower",upper:"upper"},Rl=Object.values(ki);function j(t){const i=Yt(Me);if(void 0===i)throw Error('Random value returned "undefined"!');const e=Me.indexOf(i);return e>-1&&Me.splice(e,1),t===ki.lower?i.toLowerCase():i.toUpperCase()}var F=(()=>{return(t=F||(F={})).identity="identity",t.trained="trained",t.mutuallyEntailed="mutually entailed",t.combinatoriallyEntailed="combinatorially entailed",F;var t})();class Y extends class{constructor(i,e){this.dest=e,this.src=i}toString(){return`${this.src}->${this.dest}`}}{constructor(i,e,n,r){super(i,e),this.relation=n,this.relationType=r}toString(){return`${this.src} ${this.relation} ${this.dest} (${this.relationType})`}}var Re=u(6224);const Xt=function(t,i){for(var e=t.length;e--;)if((0,Re.Z)(t[e][0],i))return e;return-1};var Il=Array.prototype.splice;function St(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}St.prototype.clear=function(){this.__data__=[],this.size=0},St.prototype.delete=function(t){var i=this.__data__,e=Xt(i,t);return!(e<0||(e==i.length-1?i.pop():Il.call(i,e,1),--this.size,0))},St.prototype.get=function(t){var i=this.__data__,e=Xt(i,t);return e<0?void 0:i[e][1]},St.prototype.has=function(t){return Xt(this.__data__,t)>-1},St.prototype.set=function(t,i){var e=this.__data__,n=Xt(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this};const te=St;var Dt=u(7699),dt=u(309);const jt=(0,Dt.Z)(dt.Z,"Map"),Nt=(0,Dt.Z)(Object,"create");var la=Object.prototype.hasOwnProperty;var ua=Object.prototype.hasOwnProperty;function bt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}bt.prototype.clear=function(){this.__data__=Nt?Nt(null):{},this.size=0},bt.prototype.delete=function(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},bt.prototype.get=function(t){var i=this.__data__;if(Nt){var e=i[t];return"__lodash_hash_undefined__"===e?void 0:e}return la.call(i,t)?i[t]:void 0},bt.prototype.has=function(t){var i=this.__data__;return Nt?void 0!==i[t]:ua.call(i,t)},bt.prototype.set=function(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Nt&&void 0===i?"__lodash_hash_undefined__":i,this};const Pi=bt,ee=function(t,i){var e=t.__data__;return function(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?e["string"==typeof i?"string":"hash"]:e.map};function Ft(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}Ft.prototype.clear=function(){this.size=0,this.__data__={hash:new Pi,map:new(jt||te),string:new Pi}},Ft.prototype.delete=function(t){var i=ee(this,t).delete(t);return this.size-=i?1:0,i},Ft.prototype.get=function(t){return ee(this,t).get(t)},Ft.prototype.has=function(t){return ee(this,t).has(t)},Ft.prototype.set=function(t,i){var e=ee(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this};const Yi=Ft;function Tt(t){var i=this.__data__=new te(t);this.size=i.size}Tt.prototype.clear=function(){this.__data__=new te,this.size=0},Tt.prototype.delete=function(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,i){var e=this.__data__;if(e instanceof te){var n=e.__data__;if(!jt||n.length<199)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new Yi(n)}return e.set(t,i),this.size=e.size,this};const ie=Tt;var ji=u(5427),Ba=u(8893);const ne=function(t,i,e,n){var r=!e;e||(e={});for(var o=-1,l=i.length;++o<l;){var a=i[o],d=n?n(e[a],t[a],a,e,t):void 0;void 0===d&&(d=t[a]),r?(0,Ba.Z)(e,a,d):(0,ji.Z)(e,a,d)}return e};var Ge=u(3709);var Ya=u(3700),Mt=u(4214),Ni=u(1550);var Va=Object.prototype.hasOwnProperty;const za=function(t){if(!(0,Mt.Z)(t))return function(t){var i=[];if(null!=t)for(var e in Object(t))i.push(e);return i}(t);var i=(0,Ni.Z)(t),e=[];for(var n in t)"constructor"==n&&(i||!Va.call(t,n))||e.push(n);return e};var Hi=u(8402);const Ee=function(t){return(0,Hi.Z)(t)?(0,Ya.Z)(t,!0):za(t)};var Vi="object"==typeof exports&&exports&&!exports.nodeType&&exports,qi=Vi&&"object"==typeof module&&module&&!module.nodeType&&module,zi=qi&&qi.exports===Vi?dt.Z.Buffer:void 0,$i=zi?zi.allocUnsafe:void 0;var Qi=u(6889);const Zi=function(){return[]};var id=Object.prototype.propertyIsEnumerable,Ki=Object.getOwnPropertySymbols;const Oe=Ki?function(t){return null==t?[]:(t=Object(t),function(t,i){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var l=t[e];i(l,e,t)&&(o[r++]=l)}return o}(Ki(t),function(i){return id.call(t,i)}))}:Zi,Ui=function(t,i){for(var e=-1,n=i.length,r=t.length;++e<n;)t[r+e]=i[e];return t},Wi=(0,u(4184).Z)(Object.getPrototypeOf,Object),Ji=Object.getOwnPropertySymbols?function(t){for(var i=[];t;)Ui(i,Oe(t)),t=Wi(t);return i}:Zi,Xi=function(t,i,e){var n=i(t);return(0,_t.Z)(t)?n:Ui(n,e(t))},Le=function(t){return Xi(t,Ge.Z,Oe)},pd=function(t){return Xi(t,Ee,Ji)},Be=(0,Dt.Z)(dt.Z,"DataView"),Ie=(0,Dt.Z)(dt.Z,"Promise"),ke=(0,Dt.Z)(dt.Z,"Set"),Pe=(0,Dt.Z)(dt.Z,"WeakMap");var Ye=u(3369),Rt=u(2035),tn="[object Map]",en="[object Promise]",nn="[object Set]",sn="[object WeakMap]",rn="[object DataView]",wd=(0,Rt.Z)(Be),_d=(0,Rt.Z)(jt),Sd=(0,Rt.Z)(Ie),Dd=(0,Rt.Z)(ke),bd=(0,Rt.Z)(Pe),ct=Ye.Z;(Be&&ct(new Be(new ArrayBuffer(1)))!=rn||jt&&ct(new jt)!=tn||Ie&&ct(Ie.resolve())!=en||ke&&ct(new ke)!=nn||Pe&&ct(new Pe)!=sn)&&(ct=function(t){var i=(0,Ye.Z)(t),e="[object Object]"==i?t.constructor:void 0,n=e?(0,Rt.Z)(e):"";if(n)switch(n){case wd:return rn;case _d:return tn;case Sd:return en;case Dd:return nn;case bd:return sn}return i});const Ht=ct;var Td=Object.prototype.hasOwnProperty;const se=dt.Z.Uint8Array,je=function(t){var i=new t.constructor(t.byteLength);return new se(i).set(new se(t)),i};var Bd=/\w*$/;var re=u(5770),on=re.Z?re.Z.prototype:void 0,ln=on?on.valueOf:void 0;const ac=function(t,i,e){var n=t.constructor;switch(i){case"[object ArrayBuffer]":return je(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,i){var e=i?je(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,i){var e=i?je(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function(t){var i=new t.constructor(t.source,Bd.exec(t));return i.lastIndex=t.lastIndex,i}(t);case"[object Set]":return new n;case"[object Symbol]":return function(t){return ln?Object(ln.call(t)):{}}(t)}};var an=Object.create;const cc=function(){function t(){}return function(i){if(!(0,Mt.Z)(i))return{};if(an)return an(i);t.prototype=i;var e=new t;return t.prototype=void 0,e}}();var Ne=u(5104),Vt=u(6539);var dn=u(1162),oe=u(8514),cn=oe.Z&&oe.Z.isMap;const yc=cn?(0,dn.Z)(cn):function(t){return(0,Vt.Z)(t)&&"[object Map]"==Ht(t)};var un=oe.Z&&oe.Z.isSet;const wc=un?(0,dn.Z)(un):function(t){return(0,Vt.Z)(t)&&"[object Set]"==Ht(t)};var gn="[object Arguments]",fn="[object Function]",hn="[object Object]",T={};T[gn]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[hn]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[fn]=T["[object WeakMap]"]=!1;const Kc=function le(t,i,e,n,r,o){var l,a=1&i,d=2&i,g=4&i;if(e&&(l=r?e(t,n,r,o):e(t)),void 0!==l)return l;if(!(0,Mt.Z)(t))return t;var m=(0,_t.Z)(t);if(m){if(l=function(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&Td.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!a)return(0,Qi.Z)(t,l)}else{var h=Ht(t),x=h==fn||"[object GeneratorFunction]"==h;if((0,Ne.Z)(t))return function(t,i){if(i)return t.slice();var e=t.length,n=$i?$i(e):new t.constructor(e);return t.copy(n),n}(t,a);if(h==hn||h==gn||x&&!r){if(l=d||x?{}:function(t){return"function"!=typeof t.constructor||(0,Ni.Z)(t)?{}:cc(Wi(t))}(t),!a)return d?function(t,i){return ne(t,Ji(t),i)}(t,function(t,i){return t&&ne(i,Ee(i),t)}(l,t)):function(t,i){return ne(t,Oe(t),i)}(t,function(t,i){return t&&ne(i,(0,Ge.Z)(i),t)}(l,t))}else{if(!T[h])return r?t:{};l=ac(t,h,a)}}o||(o=new ie);var A=o.get(t);if(A)return A;o.set(t,l),wc(t)?t.forEach(function(L){l.add(le(L,i,e,L,t,o))}):yc(t)&&t.forEach(function(L,w){l.set(w,le(L,i,e,w,t,o))});var _=m?void 0:(g?d?pd:Le:d?Ee:Ge.Z)(t);return function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==i(t[e],e,t););}(_||t,function(L,w){_&&(L=t[w=L]),(0,ji.Z)(l,w,le(L,i,e,w,t,o))}),l},ae=function(t){return Kc(t,5)};class He extends class{constructor(){this.edges=new Map,this.nodes=new Set}addEdge(i){var e;const n=i.src,r=i.dest;if(!this.hasNode(n))throw Error(`addEdge failed source node "${n.toString()}" is not in graph.`);if(!this.hasNode(r))throw Error(`addEdge failed destination node "${r.toString()}" is not in graph.`);if(null===(e=this.edges.get(i.src))||void 0===e?void 0:e.some(o=>o.src===n&&o.dest===r))throw Error(`Add edge failed an edge already exists with src ${n.toString()} => dest ${r.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i))}addNode(i){if(this.nodes.has(i))throw Error(`addNode failed node "${i.toString()}" already exists`);this.nodes.add(i),this.edges.set(i,[])}findPathway(i,e,n,r={nodes:[],edges:[]},o=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return o.concat(r);for(const l of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(l.dest.toString())){const a=this.findPathway(l.dest,e,l,ae(r),o);a&&(o=o.concat(a))}return o}getEdgesForNode(i){return this.edges.get(i)||[]}hasNode(i){return this.nodes.has(i)}toString(){return Array.from(this.edges.values()).flat().filter(Boolean).map(i=>i.toString()).join("\n")}}{constructor(i){super(),this.includeRelationsBetweenNetworks=!1,this.selfRelation=i.selfRelation,this.unknownRelation=i.unknownRelation,this.mutualDictionary=i.mutualDictionary,this.combinatorialDictionary=i.combinatorialDictionary}get combinatoriallyEntailed(){const i=[],e=[...this.nodes];for(const n of e)for(const r of e){if(n===r||!this.includeRelationsBetweenNetworks&&n.network!==r.network||this.getEdgesForNode(n).find(l=>l.dest===r))continue;const o=this.findPathway(n,r).map(l=>l.edges.map(a=>a.relation)).reduce((l,a,d)=>{const g=[...a];let m=g.shift();for(;g.length;){const h=g.shift();m=this.combinatorialDictionary[m][h]}return l.push(m),a.length=0,l},[]);0===o.length&&o.push(this.unknownRelation),[...new Set(o.filter(l=>l!==this.unknownRelation))].length>1?console.warn(`Multiple relations detected for ${n.toString()} => ${r.toString()} comparison`,o):i.push({relation:o[0],relationType:F.combinatoriallyEntailed,stimuli:[n,r]})}return i}get identities(){return[...this.nodes].map(i=>({relation:this.selfRelation,relationType:F.identity,stimuli:[i,i]}))}get mutuallyEntailed(){return[...this.edges.values()].flat().filter(i=>i.relationType===F.mutuallyEntailed).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}get trained(){return[...this.edges.values()].flat().filter(i=>i.relationType===F.trained).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}addTrainedAndMutualRelations(i){var e,n;const r=i.src,o=i.dest;if(!this.hasNode(r))throw Error(`Add edge failed source node "${r.toString()}" is not in graph.`);if(!this.hasNode(o))throw Error(`Add edge failed destination node "${o.toString()}" is not in graph.`);if(!(null===(e=this.mutualDictionary)||void 0===e?void 0:e[i.relation]))throw Error(`Could not find inverse of relation ${i.relation}`);if(null===(n=this.edges.get(i.src))||void 0===n?void 0:n.some(l=>l.src===r&&l.dest===o))throw Error(`Add edge failed an edge already exists with src ${r.toString()} => dest ${o.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i)),this.edges.set(i.dest,this.edges.get(i.dest).concat(new Y(i.dest,i.src,this.mutualDictionary[i.relation],F.mutuallyEntailed)))}findPathway(i,e,n,r={nodes:[],edges:[]},o=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return o.concat(r);for(const l of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(l.dest.toString())){const a=this.findPathway(l.dest,e,l,ae(r),o);a&&(o=o.concat(a))}return o}toString(){return[].concat(this.identities,this.trained,this.mutuallyEntailed,this.combinatoriallyEntailed).flat().map(i=>`${i.relationType}: ${i.stimuli[0]} ${i.relation} ${i.stimuli[1]}`).join("\n")}}class k{constructor(i,e,n=""){this.name=i,this.network=e,this.value=n}repr(){return`new RelationalFrameNode('${this.name}','${this.network}','${this.value}')`}toString(){return`${this.name}${this.network}`}}var Ve=u(202);let mn=(()=>{class t extends He{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n,this.includeRelationsBetweenNetworks=!0;const r=new k("A",1,j(e)),o=new k("B",1,j(e)),l=new k("C",1,j(e));this.addNode(r),this.addNode(o),this.addNode(l),this.addEdge(new Y(r,o,"different",F.trained)),this.addEdge(new Y(r,l,"different",F.trained)),this.addEdge(new Y(o,r,"different",F.trained)),this.addEdge(new Y(o,l,"different",F.trained)),this.addEdge(new Y(l,r,"different",F.trained)),this.addEdge(new Y(l,o,"different",F.trained));const a=new k("D",2,j(e)),d=new k("E",2,j(e)),g=new k("F",2,j(e));this.addNode(a),this.addNode(d),this.addNode(g)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Qt),s.LFG(Ve.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=u(4146);const tu=[[f.bR.same,f.bR.same,void 0],[f.bR.same,f.bR.greaterThan,void 0],[f.bR.same,f.bR.lessThan,void 0],[f.bR.lessThan,f.bR.same,void 0],[f.bR.lessThan,void 0,f.bR.lessThan],[f.bR.lessThan,f.bR.greaterThan,void 0],[f.bR.greaterThan,f.bR.same,void 0],[f.bR.greaterThan,f.bR.lessThan,void 0],[f.bR.greaterThan,void 0,f.bR.greaterThan]],eu=[[f.bR.lessThan,f.bR.lessThan,void 0],[f.bR.greaterThan,f.bR.greaterThan,void 0]];let qe=(()=>{class t extends He{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n,this.includeRelationsBetweenNetworks=!0;const r=new k("A",3,j(e)),o=new k("B",3,j(e)),l=new k("C",3,j(e));this.addNode(r),this.addNode(o),this.addNode(l);const[a,d,g]=Yt(tu);a&&this.addTrainedAndMutualRelations(new Y(r,o,a,F.trained)),d&&this.addTrainedAndMutualRelations(new Y(r,l,d,F.trained)),g&&this.addTrainedAndMutualRelations(new Y(o,l,g,F.trained));const m=new k("A",4,j(e)),h=new k("B",4,j(e)),x=new k("C",4,j(e));this.addNode(m),this.addNode(h),this.addNode(x);const[A,b,_]=Yt(eu);A&&this.addTrainedAndMutualRelations(new Y(m,h,A,F.trained)),b&&this.addTrainedAndMutualRelations(new Y(m,x,b,F.trained)),_&&this.addTrainedAndMutualRelations(new Y(h,x,_,F.trained))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Qt),s.LFG(Ve.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pn=(()=>{class t extends He{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n;const r=new k("A",5,j(e)),o=new k("B",5,j(e)),l=new k("C",5,j(e));this.addNode(r),this.addNode(o),this.addNode(l),this.addTrainedAndMutualRelations(new Y(r,o,"same",F.trained)),this.addTrainedAndMutualRelations(new Y(r,l,"same",F.trained)),this.addTrainedAndMutualRelations(new Y(o,l,"same",F.trained));const a=new k("A",6,j(e)),d=new k("B",6,j(e)),g=new k("C",6,j(e));this.addNode(a),this.addNode(d),this.addNode(g),this.addTrainedAndMutualRelations(new Y(a,d,"greaterThan",F.trained)),this.addTrainedAndMutualRelations(new Y(a,g,"greaterThan",F.trained)),this.addTrainedAndMutualRelations(new Y(d,g,"greaterThan",F.trained))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Qt),s.LFG(Ve.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function iu(){const t=Yt(Rl);if(void 0===t)throw Error('Random stimulus case returned "undefined"!');return t}function qt(t){return{data:t,disableClose:!0,hasBackdrop:!1,closeOnNavigation:!0,height:"100vh",maxHeight:"100vh",maxWidth:"100vw",panelClass:["fullscreen-dialog-container","animate__animated","animate__fadeIn"],width:"100vw"}}function nu(t,i){1&t&&s._UZ(0,"iframe",5)}function su(t,i){1&t&&s._UZ(0,"iframe",6)}let yn=(()=>{class t{constructor(e,n){this.data=e,this.ref=n}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Wt),s.Y36(Ct))},t.\u0275cmp=s.Xpm({type:t,selectors:[["survey-dialog"]],decls:7,vars:3,consts:[["mat-dialog-title","",1,"p-3","text-center"],["src","https://docs.google.com/forms/d/e/1FAIpQLSfUjqCloWRFFmtxktYAz-vnNuoo-YpdY1rpuS8bNAM7JiK9Jw/viewform?embedded=true",4,"ngIf"],["src","https://docs.google.com/forms/d/e/1FAIpQLSczKoo6Uf1wy11LoWiwvIcECIjoZy3YdAA-bCzNVDZtpxvAFg/viewform?embedded=true",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","color","primary",3,"click"],["src","https://docs.google.com/forms/d/e/1FAIpQLSfUjqCloWRFFmtxktYAz-vnNuoo-YpdY1rpuS8bNAM7JiK9Jw/viewform?embedded=true"],["src","https://docs.google.com/forms/d/e/1FAIpQLSczKoo6Uf1wy11LoWiwvIcECIjoZy3YdAA-bCzNVDZtpxvAFg/viewform?embedded=true"]],template:function(e,n){1&e&&(s.TgZ(0,"h1",0),s._uU(1),s.qZA(),s.YNc(2,nu,1,0,"iframe",1),s.YNc(3,su,1,0,"iframe",2),s.TgZ(4,"div",3),s.TgZ(5,"button",4),s.NdJ("click",function(){return n.ref.close()}),s._uU(6,"RETURN TO STUDY"),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Oqu(n.data.title),s.xp6(1),s.Q6J("ngIf","pre"===n.data.survey),s.xp6(1),s.Q6J("ngIf","post"===n.data.survey))},directives:[ml,p.O5,pl,yt.lW],styles:["[_nghost-%COMP%]{display:block;padding:16px}iframe[_ngcontent-%COMP%]{height:calc(100vh - 164px);width:calc(100vw - 32px)}"]}),t})(),ze=(()=>{class t{constructor(e){this.dialog=e}showPostSurvey(e){return this.dialog.open(yn,qt({title:`Post Survey | Participant Id = ${e}`,survey:"post"})).afterClosed()}showPreSurvey(e){return this.dialog.open(yn,qt({title:`Pre Survey | Participant Id = ${e}`,survey:"pre"})).afterClosed()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(z))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),ru=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[ze],imports:[[p.ez,wt,yt.ot]]}),t})();var xn=u(2636),H=u(4762),ut=u(9524),Gt=u(6797),gt=u(8049),de=u(3190);function ce(t){return(0,S.X$)((null==t?void 0:t.anchor)||"fadeOut",[(0,S.SB)("false",(0,S.oB)({visibility:"visible",opacity:1})),(0,S.SB)(":leave",(0,S.oB)({visibility:"visible",opacity:1})),(0,S.SB)("true",(0,S.oB)({visibility:"hidden",opacity:0})),(0,S.eR)("void => *",(0,S.jt)(0)),(0,S.eR)("* => true",(0,S.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}const Z=150;let An=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,this.closeClicked=new R.xQ,this.disableClose=Boolean(this.data.disableClose)}close(){return(0,H.mG)(this,void 0,void 0,function*(){this.closeClicked.next(),this.animated=!0,yield(0,Gt.H)(750).toPromise(),this.ref.close()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Wt),s.Y36(Ct))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block-start-dialog"]],decls:3,vars:3,consts:[["matRipple","",1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white",3,"matRippleDisabled","tap"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.NdJ("tap",function(){return!1===n.disableClose&&n.close()}),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",n.animated)("matRippleDisabled",n.animated||n.disableClose),s.xp6(2),s.Oqu(n.data.text))},directives:[at.wG],styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:clamp(1rem,8vw,15rem);line-height:clamp(1rem,8vw,15rem);text-align:center}"],data:{animation:[ce({duration:Z})]}}),t})();var $=u(5112);const Cn=function(t,i,e){return t==t&&(void 0!==e&&(t=t<=e?t:e),void 0!==i&&(t=t>=i?t:i)),t};var wn=u(1994);const au=function(t,i){return(0,wn.Z)((0,Qi.Z)(t),Cn(i,0,t.length))},cu=function(t,i){var e=(0,Ii.Z)(t);return(0,wn.Z)(e,Cn(i,0,e.length))};var uu=u(8078);var hu=/\s/;var yu=/^\s+/;const vu=function(t){return t&&t.slice(0,function(t){for(var i=t.length;i--&&hu.test(t.charAt(i)););return i}(t)+1).replace(yu,"")};var _u=/^[-+]0x[0-9a-f]+$/i,Su=/^0b[01]+$/i,Du=/^0o[0-7]+$/i,bu=parseInt;const Tu=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||(0,Vt.Z)(t)&&"[object Symbol]"==(0,Ye.Z)(t)}(t))return NaN;if((0,Mt.Z)(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=(0,Mt.Z)(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=vu(t);var e=Su.test(t);return e||Du.test(t)?bu(t.slice(2),e?2:8):_u.test(t)?NaN:+t},Ou=function(t){var i=function(t){return t?1/0===(t=Tu(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),e=i%1;return i==i?e?i-e:i:0},Qe=function(t,i,e){return i=(e?function(t,i,e){if(!(0,Mt.Z)(e))return!1;var n=typeof i;return!!("number"==n?(0,Hi.Z)(e)&&(0,uu.Z)(i,e.length):"string"==n&&i in e)&&(0,Re.Z)(e[i],t)}(t,i,e):void 0===i)?1:Ou(i),((0,_t.Z)(t)?au:cu)(t,i)};var v=u(4751);const zt={_origin:"https://api.emailjs.com"};class Fn{constructor(i){this.status=i.status,this.text=i.responseText}}const Mn=(t,i,e,n)=>{const r=n||zt._userID;return((t,i,e)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!i)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(r,t,i),((t,i,e={})=>new Promise((n,r)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:l})=>{const a=new Fn(l);200===a.status||"OK"===a.text?n(a):r(a)}),o.addEventListener("error",({target:l})=>{r(new Fn(l))}),o.open("POST",zt._origin+t,!0),Object.keys(e).forEach(l=>{o.setRequestHeader(l,e[l])}),o.send(i)}))("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:r,service_id:t,template_id:i,template_params:e}),{"Content-type":"application/json"})};var Ze=u(9119);const Rn="Throughout this experiment, you will be presented with two sets of letter sequences, one at the top portion of\n    the screen and one in the middle portion of the screen. You will also be presented with some response option\n    buttons along the bottom of the screen. These buttons may denote the relationship between the letter sequences.\n    They may or may not be familiar to you. Your task is to select the response option that accurately represents the\n    relationship between the letter sequences. You can make your selection by touching the screen or clicking on the\n    relevant response option at the bottom of the screen.\n\n    Your participation has to be done in one sitting. Typically, participation takes approximately 90 minutes or more to\n    complete. To successfully complete, it is recommended that you minimize sources of distraction while\n    participating. This includes being in a quiet space away from other devices and putting this device on \u201cDo not\n    disturb\u201d mode or its equivalent.\n\n    Successful completion may be challenging and confusing. Please persist to the end and give it your best effort.\n    During some portions of the experiment you will be provided feedback on your selections. If you don\u2019t see\n    feedback, please continue making selections. There is a time limit for making your selections. Please choose your\n    response as fast as you can while still being accurate. Your compensation will go up the more accurate you are.\n\n    This experiment will restart if it is no longer the active window. In order to complete quickly, please do not open \n    other tabs or software while doing this task.";var Iu=u(2376);let ft=(()=>{class t{constructor(e,n){this.fb=e,this.studyConfigService=n,this.reportEntries=[],this.formGroup=this.fb.group({studyInstructions:[""],participantId:["",v.kI.required],iCannotKnow:["",v.kI.required],contextualControl:["",v.kI.required],cueType:["",[v.kI.required]],trialTimeoutSeconds:[0,v.kI.min(1)],balanceEquivalence:[0,v.kI.min(1)],balanceLessThan:[0,v.kI.min(1)],balanceGreaterThan:[0,v.kI.min(1)],balanceICannotKnow:[-1,v.kI.min(0)],blockId:["",v.kI.required],blockAttempts:[-1,v.kI.min(0)],stimulusCase:["",v.kI.required],trainingAttempts:[-1,v.kI.min(0)],probeAttempts:[-1,v.kI.min(0)],trialNumber:[-1,v.kI.min(0)],totalTrials:[-1,v.kI.min(0)],sampleNode:["",v.kI.required],sample:["",v.kI.required],comparisonNode:["",v.kI.required],comparison:["",v.kI.required],correctResponse:["",v.kI.required],button1Image:["",v.kI.required],button1Relation:["",v.kI.required],button2Image:["",v.kI.required],button2Relation:["",v.kI.required],button3Image:["",v.kI.required],button3Relation:["",v.kI.required],button4Image:["",v.kI.required],button4Relation:["",v.kI.required],buttonPosition:[-2,v.kI.min(-1)],selectedResponse:[""],consequence:[""],trialStarted:["",v.kI.required],trialCompleted:["",v.kI.required],trialDurationInSeconds:[-1,v.kI.min(0)],trialOutcome:["",v.kI.required],containsSequentialTriplicates:["",v.kI.required],failSafeDuration:["",v.kI.required],startInstructions:["",v.kI.required],retryInstructions:["",v.kI.required],studyFailed:["FALSE"],sequentialCorrect:[-1,v.kI.min(0)]})}add(e,n){this.formGroup.get(e).setValue(n)}addTrial(e,n){var r,o;if(!e.studyConfig)throw Error("Study configuration is undefined");if(!e.trial)throw Error("Trial is undefined");this.studyConfig=e.studyConfig,this.add("studyInstructions",0===this.reportEntries.length?Rn.replaceAll("\n",""):""),this.add("participantId",e.studyConfig.participantId),this.add("iCannotKnow",e.studyConfig.iCannotKnow),this.add("contextualControl",e.studyConfig.contextualControl),this.add("cueType",e.studyConfig.cueType),this.add("trialTimeoutSeconds",e.studyConfig.trialTimeoutSeconds),this.add("balanceEquivalence",e.studyConfig.balance.same),this.add("balanceLessThan",e.studyConfig.balance.lessThan),this.add("balanceGreaterThan",e.studyConfig.balance.greaterThan),this.add("balanceICannotKnow",null!==(r=e.studyConfig.balance.iCannotKnow)&&void 0!==r?r:0),this.add("blockId",e.name),this.add("blockAttempts",e.attempts),this.add("trainingAttempts",e.trainingAttempts),this.add("probeAttempts",e.probeAttempts),this.add("trialNumber",e.trialNum),this.add("totalTrials",e.totalTrials),this.add("sampleNode",e.trial.stimuli[0].toString()),this.add("sample",e.trial.stimuli[0].value),this.add("comparisonNode",e.trial.stimuli[1].toString()),this.add("comparison",e.trial.stimuli[1].value),this.add("correctResponse",e.trial.relation),this.add("button1Image",e.trial.cueComponentConfigs[0].fileName),this.add("button1Relation",e.trial.cueComponentConfigs[0].value),this.add("button2Image",e.trial.cueComponentConfigs[1].fileName),this.add("button2Relation",e.trial.cueComponentConfigs[1].value),this.add("button3Image",e.trial.cueComponentConfigs[2].fileName),this.add("button3Relation",e.trial.cueComponentConfigs[2].value),this.add("button4Image",e.trial.cueComponentConfigs.length>=4?e.trial.cueComponentConfigs[3].fileName:"UNDEFINED"),this.add("button4Relation",e.trial.cueComponentConfigs.length>=4?e.trial.cueComponentConfigs[3].value:"UNDEFINED"),this.add("buttonPosition",(null==n?void 0:n.position)?n.position:-1),this.add("selectedResponse",(null==n?void 0:n.cue)?n.cue.value:""),this.add("consequence",(null==n?void 0:n.cue)?(null==e?void 0:e.feedback)?e.feedback:"NEXT TRIAL":"TIME EXPIRED"),this.add("trialStarted",n.startedAt),this.add("trialCompleted",n.completedAt),this.add("trialDurationInSeconds",Math.abs(n.startedAt.getTime()-n.completedAt.getTime())/1e3),this.add("trialOutcome",(null===(o=null==n?void 0:n.cue)||void 0===o?void 0:o.value)===e.trial.relation?"PASS":"FAIL"),this.add("containsSequentialTriplicates",e.containsSequentialTriplicates?"TRUE":"FALSE"),this.add("failSafeDuration",e.failSafeDuration.toString()),this.add("startInstructions",e.startInstructions),this.add("retryInstructions",e.retryInstructions),this.add("studyFailed",e.studyFailed?"TRUE":"FALSE"),this.add("sequentialCorrect",e.sequentialCorrect),this.reportEntries.push(this.formGroup.value),this.formGroup.reset()}blobToBase64(e){return new Promise((n,r)=>{const o=new FileReader;o.onloadend=()=>n(o.result),o.readAsDataURL(e)})}sendReport(e){return(0,H.mG)(this,void 0,void 0,function*(){const{participantId:n}=this.studyConfigService,r="\r\n";this.reportEntries.length&&(this.reportEntries[this.reportEntries.length-1].studyFailed="complete"!==e?"TRUE":"FALSE");const o=this.reportEntries.map(g=>Object.values(g).map(m=>{var h;return null!==(h=null==m?void 0:m.toString())&&void 0!==h?h:""}).join(";")).join(r),l=`MEEKU - ${n}.csv`,a=new Blob([e+r+Object.keys(this.formGroup.value).join(";")+r+o],{type:"text/csv"}),d=yield this.blobToBase64(a);((t,i="https://api.emailjs.com")=>{zt._userID=t,zt._origin=i})("user_OawQbiPiSgdzcdY3SkdGT"),Mn("meeku-report","meeku-report",{attachmentName:l,content:d,from_name:"Meeku Robot",to_name:"Patrick",message:`New report has been issued! ${n}`,participant:l},"user_OawQbiPiSgdzcdY3SkdGT").then(function(g){},function(g){console.error("Failed to send report...",g)})})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Iu.qu),s.LFG(Ze.R))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Et;class K{constructor(){Et.set(this,0)}get showColorTrial(){return 100===(0,H.Q_)(this,Et,"f")}increase(){(0,H.YH)(this,Et,+(0,H.Q_)(this,Et,"f")+1,"f")}reset(){(0,H.YH)(this,Et,0,"f")}}Et=new WeakMap,K.\u0275fac=function(i){return new(i||K)},K.\u0275prov=s.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"});const ku=function(t,i){return{value:t,params:i}};let Pu=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,setTimeout(()=>this.animated=!0,0),setTimeout(()=>this.ref.close(),this.data.durationMs);const r=new Audio;r.src=`./assets/${e.feedback.toLowerCase().replaceAll(" ","-")}.mp3`,r.load(),r.play().then(()=>r.remove())}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Wt),s.Y36(Ct))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-correct-dialog"]],decls:3,vars:5,consts:[[1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",s.WLB(2,ku,n.animated,n.data.animationParams)),s.xp6(2),s.Oqu(n.data.feedback))},styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);white-space:nowrap}"],data:{animation:[ce()]}}),t})();var Yu=u(409);const J=500,Ke={stimuli:[J,2*J],cues:Array(5).fill(3*J)},Gn=Math.max(...Object.values(Ke).flat())+1e3;var mt=u(680);function En(t){return(0,S.X$)((null==t?void 0:t.anchor)||"fadeIn",[(0,S.SB)("void",(0,S.oB)({visibility:"hidden",opacity:0})),(0,S.SB)("false",(0,S.oB)({visibility:"hidden",opacity:0})),(0,S.SB)("true",(0,S.oB)({visibility:"visible",opacity:1})),(0,S.eR)("* => true",(0,S.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}var On=u(730);const ju=function(t){return{delay:t}},Nu=function(t,i){return{value:t,params:i}},Hu=function(t,i){return{"d-none":t,"hover-able":i}},Vu=function(t){return{"pointer-events":t}};let Ln=(()=>{class t{constructor(e){this.deviceDetectorSvc=e,this.animationDelay=0,this.disabled=!0,this.isDesktop=this.deviceDetectorSvc.isDesktop(),this.selected=new s.vpe}select(){this.disabled=!0,this.selected.emit(this.config)}set(e){return(0,H.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,Gt.H)(Z).toPromise(),this.disabled=!1,this.config=e,this.animate="fade-in"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(On.x0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-cue"]],inputs:{animationDelay:"animationDelay"},outputs:{selected:"selected"},decls:2,vars:18,consts:[["onclick","blur()","matRipple","",1,"trial-item","dynamic-text",3,"matRippleDisabled","ngClass","ngStyle","click","tap"]],template:function(e,n){1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return n.isDesktop&&!n.disabled&&n.select()})("tap",function(){return!n.isDesktop&&!n.disabled&&n.select()}),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",null==n.config?null:n.config.fileName),s.Q6J("@fadeIn",s.WLB(10,Nu,"fade-in"===n.animate,s.VKq(8,ju,n.animationDelay)))("@fadeOut","fade-out"===n.animate)("matRippleDisabled",n.disabled)("ngClass",s.WLB(13,Hu,void 0===n.config,n.isDesktop))("ngStyle",s.VKq(16,Vu,null!=n.config&&n.config.value?"all":"none")),s.xp6(1),s.hij(" ",null!=n.config&&n.config.isArbitrary?"\xa0":(null==n.config?null:n.config.viewValue)||""," "))},directives:[at.wG,p.mk,p.PC],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[En(),ce({duration:Z})]}}),t})();const qu=function(t){return{delay:t}},zu=function(t,i){return{value:t,params:i}};let Bn=(()=>{class t{constructor(e){this.deviceDetectorSvc=e,this.animationDelay=0,this.isDesktop=this.deviceDetectorSvc.isDesktop()}set(e){return(0,H.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,Gt.H)(Z).toPromise(),this.backgroundImage=f.Sg,this.cue=e,this.animate="fade-in"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(On.x0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-stimulus"]],inputs:{animationDelay:"animationDelay"},decls:2,vars:10,consts:[[1,"trial-item","dynamic-text"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",n.backgroundImage),s.Q6J("@fadeIn",s.WLB(7,zu,"fade-in"===n.animate,s.VKq(5,qu,n.animationDelay)))("@fadeOut","fade-out"===n.animate),s.xp6(1),s.hij(" ",n.cue,"\n"))},styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[En(),ce({duration:Z})]}}),t})();function $u(t,i){1&t&&s._UZ(0,"trial-stimulus",4),2&t&&s.Q6J("animationDelay",i.$implicit)}function Qu(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial-cue",5),s.NdJ("selected",function(r){const l=s.CHM(e).index;return s.oxw().selected(r,l+1)}),s.qZA()}2&t&&s.Q6J("animationDelay",i.$implicit)}let V=class{constructor(i){this.overlaySvc=i,this.animationDelayMs=Ke,this.complete=!1,this.completed=new s.vpe,this.secondsInTrial=0}clearTimer(){this.timerSub&&this.timerSub.unsubscribe()}ngAfterViewInit(){if(!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");this.trialCueComponents.changes.pipe((0,ut.t)(this)).subscribe(),this.trialStimulusComponents.changes.pipe((0,ut.t)(this)).subscribe()}selected(i,e){if(!this.startedAt)throw Error("Started at date is undefined");this.clearTimer(),this.complete=!0,this.completed.emit({cue:i,position:e,startedAt:this.startedAt,completedAt:new Date})}setTimer(){const{studyConfig:i}=this;if(!i)throw Error("Study configuration is undefined");this.clearTimer(),this.secondsInTrial=0,this.timerSub=(0,Gt.H)(Gn,1e3).pipe((0,Yu.o)(()=>this.secondsInTrial<i.trialTimeoutSeconds&&!this.complete),(0,st.b)(()=>{this.secondsInTrial++,this.secondsInTrial===i.trialTimeoutSeconds&&!this.complete&&this.selected()}),(0,ut.t)(this)).subscribe()}show(i){var e,n;if(this.overlaySvc.hide(),!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");setTimeout(()=>this.startedAt=new Date,Ke.cues[0]),this.complete=!1,this.setTimer();for(const[r,o]of i.stimuli.entries())null===(e=this.trialStimulusComponents.get(r))||void 0===e||e.set(o.value);for(let r=0;r<this.trialCueComponents.length;r++)null===(n=this.trialCueComponents.get(r))||void 0===n||n.set(i.cueComponentConfigs[r])}};function Ku(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}}V.\u0275fac=function(i){return new(i||V)(s.Y36(mt.F))},V.\u0275cmp=s.Xpm({type:V,selectors:[["trial"]],viewQuery:function(i,e){if(1&i&&(s.Gf(Ln,5),s.Gf(Bn,5)),2&i){let n;s.iGM(n=s.CRH())&&(e.trialCueComponents=n),s.iGM(n=s.CRH())&&(e.trialStimulusComponents=n)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed"},decls:4,vars:2,consts:[[1,"trial-sample-stimuli"],[3,"animationDelay",4,"ngFor","ngForOf"],[1,"trial-buttons"],[3,"animationDelay","selected",4,"ngFor","ngForOf"],[3,"animationDelay"],[3,"animationDelay","selected"]],template:function(i,e){1&i&&(s.TgZ(0,"div",0),s.YNc(1,$u,1,1,"trial-stimulus",1),s.qZA(),s.TgZ(2,"div",2),s.YNc(3,Qu,1,1,"trial-cue",3),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngForOf",e.animationDelayMs.stimuli),s.xp6(2),s.Q6J("ngForOf",e.animationDelayMs.cues))},directives:[p.sg,Bn,Ln],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}"]}),V=(0,H.gn)([(0,ut.c)(),(0,H.w6)("design:paramtypes",[mt.F])],V);let ue=(()=>{class t{constructor(e,n,r,o){this.dialog=e,this.overlaySvc=n,this.reportSvc=r,this.trialCounterSvc=o,this.completed=new R.xQ,this.containsSequentialTriplicates=!1,this.correct=0,this.failSafeDuration=0,this.feedBackShown=!1,this.incorrect=0,this.index=-1,this.isVisible=!0,this.name="Block",this.retryInstructions="CLICK TO TRY AGAIN",this.sequentialCorrect=0,this.startInstructions="CLICK TO START",this.started=new R.xQ,this.studyFailed=!1,this.trialCompleted=new s.vpe,this.trials=[],this._attempts=0,this._probeAttempts=0,this._totalTrials=0,this._trainingAttempts=0}get attempts(){return this._attempts}get probeAttempts(){return this._probeAttempts}get totalTrials(){return this._totalTrials}get trainingAttempts(){return this._trainingAttempts}get isLastTrial(){return this.index===this.trials.length-1}get percentCorrect(){return this.correct/(this.correct+this.incorrect)*100}get trialNum(){return this.index+1}complete(){this.incrementAttempt(),this.completedAt=new Date,setTimeout(()=>{this.completed.next({failed:!1})},J+(this.feedBackShown?850:Z))}createTrials(){return[]}failed(){this.completed.next({failed:!0})}feedbackEnabled(){return!1}grade(e){var n,r;if(!this.trial)throw Error("Trial is undefined");const o=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;return(null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++):(this.incorrect++,this.sequentialCorrect=0),o?"CORRECT":"WRONG"}increaseTotalTrials(){this._totalTrials++}incrementAttempt(){this._attempts++}incrementProbeAttempts(){return this._probeAttempts++}incrementTrainingAttempts(){return this._trainingAttempts++}nextTrial(){-1===this.index&&(this.startedAt=new Date),this.trialCounterSvc.increase(),this.trialCounterSvc.showColorTrial?(this.showTrial(function(){const t=Yt(["red","green","blue"]);if(!t)throw Error("Missing color in create color trial");return{relation:t,relationType:"N/A",stimuli:[new k("choose",0,"choose"),new k(t,0,t)],cueComponentConfigs:(0,$.Z)([{fileName:f.Sg,isArbitrary:!1,value:"red",viewValue:"red"},{fileName:f.Sg,isArbitrary:!1,value:"blue",viewValue:"blue"},{fileName:f.Sg,isArbitrary:!1,value:"green",viewValue:"green"}])}}(),this.feedBackShown?850:0),this.trialCompleted.pipe((0,gt.P)()).subscribe(e=>this.cueSelected(e)),this.trialCounterSvc.reset()):this.index!==this.trials.length-1?(this.index++,this.showTrial(this.trials[this.index],this.feedBackShown?850:0),this.trialCompleted.pipe((0,gt.P)()).subscribe(e=>this.cueSelected(e))):this.complete()}prompt(e,n=!1,r=Gn){return(0,Gt.H)(r).pipe((0,gt.P)(),(0,de.w)(()=>this.dialog.open(An,qt({text:e,disableClose:n})).componentInstance.closeClicked.pipe((0,gt.P)())))}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.sequentialCorrect=0,this.trials=this.createTrials()}retry(){this.incrementAttempt(),this.prompt(this.retryInstructions,!1,J+(this.feedBackShown?850:Z)).subscribe(()=>this.nextTrial()),this.reset()}showFeedback(e,n=1e3,r={delay:850,duration:Z}){this.feedBackShown=!0,this.isLastTrial&&this.overlaySvc.show(850),this.dialog.open(Pu,qt({animationParams:r,durationMs:n,feedback:e}))}showTrial(e,n=850){this.feedBackShown=!1,this.trial=e,setTimeout(()=>{var r;return null===(r=this.trialComponent)||void 0===r?void 0:r.show(e)},n)}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,J).subscribe(()=>{this.started.next(),this.nextTrial()})}cueSelected(e){this.feedback=this.grade(e),(null==e?void 0:e.cue)?this.feedback&&this.feedbackEnabled()&&this.showFeedback(this.feedback):this.showFeedback("TIME EXPIRED"),this.reportSvc.addTrial(this,e),this.increaseTotalTrials(),this.nextTrial()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(z),s.Y36(mt.F),s.Y36(ft),s.Y36(K))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block"]],viewQuery:function(e,n){if(1&e&&s.Gf(V,5),2&e){let r;s.iGM(r=s.CRH())&&(n.trialComponent=r.first)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed",started:"started",trialCompleted:"trialCompleted"},decls:1,vars:1,consts:[[3,"completed",4,"ngIf"],[3,"completed"]],template:function(e,n){1&e&&s.YNc(0,Ku,1,0,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,V],styles:[""]}),t})();var ge=u(2151);function Ue(t,i){return new Array(t.iCannotKnow?4:3).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[i],value:i,viewValue:ge.upper(i)}))}function fe(t){return(0,$.Z)(t.iCannotKnow?f.Tz:f.do).map(e=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[e],value:e,viewValue:ge.upper(e)}))}function Wu(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Ju=(()=>{class t extends ue{constructor(e,n,r,o,l){super(e,n,r,o),this.network1And2Graph=l,this.name="Forced Choice",this.numDifferentProbeTrials=5,this.numIdkProbeTrials=5,this.numIdkTrainingTrials=6,this.numProbeTrials=10,this.probeFailuresAllotted=10,this.probesFailed=0,this.startInstructions="TAKE A BREAK. 14% COMPLETE. CLICK TO CONTINUE",this.trainingFailuresAllotted=10,this.trainingsFailed=0}get numTrainingTrials(){if(!this.studyConfig)throw Error("Study configuration is undefined");return this.studyConfig.iCannotKnow?18:12}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study studyConfig not defined");const n=Ue(e,f.bR.same),r=Ue(e,f.bR.different),o=Ue(e,f.bR.iCannotKnow),l=this.network1And2Graph.identities.filter(x=>1===x.stimuli[0].network),a=(0,$.Z)([l,l].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:n}))),d=(0,$.Z)([this.network1And2Graph.trained,this.network1And2Graph.mutuallyEntailed].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:r}))),g=(0,$.Z)([this.network1And2Graph.combinatoriallyEntailed.filter(x=>!(2===x.stimuli[0].network&&2===x.stimuli[1].network))].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:o}))),m=e.iCannotKnow?a.concat(d,Qe(g,this.numIdkTrainingTrials)):a.concat(d);if(m.length>this.numTrainingTrials)throw Error(`Training trials length "${m.length}" is greater than specified length "${this.numTrainingTrials}"`);const h=(0,$.Z)(ae(Qe(d,this.numDifferentProbeTrials)).concat(ae(Qe(g,this.numIdkProbeTrials))).map(x=>(x.cueComponentConfigs=function(t,i,e){return(0,$.Z)(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[i],value:i,viewValue:ge.upper(i)})).concat(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[e],value:e,viewValue:ge.upper(e)}))))}(e,f.bR.different,f.bR.iCannotKnow),x)));if(h.length>this.numProbeTrials)throw Error(`Probe trials length "${h.length}" is greater than specified length "${this.numIdkProbeTrials}"`);return e.iCannotKnow?m.concat(h):m}feedbackEnabled(){return this.index<this.numTrainingTrials}ngOnInit(){this.start()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(z),s.Y36(mt.F),s.Y36(ft),s.Y36(K),s.Y36(mn))},t.\u0275cmp=s.Xpm({type:t,selectors:[["forced-choice-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,Wu,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,V],styles:[""],data:{animation:[]}}),t})();function he(t){var i=-1,e=null==t?0:t.length;for(this.__data__=new Yi;++i<e;)this.add(t[i])}he.prototype.add=he.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},he.prototype.has=function(t){return this.__data__.has(t)};const sg=he,og=function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n;)if(i(t[e],e,t))return!0;return!1},ag=function(t,i){return t.has(i)},In=function(t,i,e,n,r,o){var l=1&e,a=t.length,d=i.length;if(a!=d&&!(l&&d>a))return!1;var g=o.get(t),m=o.get(i);if(g&&m)return g==i&&m==t;var h=-1,x=!0,A=2&e?new sg:void 0;for(o.set(t,i),o.set(i,t);++h<a;){var b=t[h],_=i[h];if(n)var L=l?n(_,b,h,i,t,o):n(b,_,h,t,i,o);if(void 0!==L){if(L)continue;x=!1;break}if(A){if(!og(i,function(w,N){if(!ag(A,N)&&(b===w||r(b,w,e,n,o)))return A.push(N)})){x=!1;break}}else if(b!==_&&!r(b,_,e,n,o)){x=!1;break}}return o.delete(t),o.delete(i),x},fg=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n,r){e[++i]=[r,n]}),e},mg=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n){e[++i]=n}),e};var kn=re.Z?re.Z.prototype:void 0,We=kn?kn.valueOf:void 0;var Og=Object.prototype.hasOwnProperty;var Ig=u(7728),Pn="[object Arguments]",Yn="[object Array]",me="[object Object]",jn=Object.prototype.hasOwnProperty;const jg=function(t,i,e,n,r,o){var l=(0,_t.Z)(t),a=(0,_t.Z)(i),d=l?Yn:Ht(t),g=a?Yn:Ht(i),m=(d=d==Pn?me:d)==me,h=(g=g==Pn?me:g)==me,x=d==g;if(x&&(0,Ne.Z)(t)){if(!(0,Ne.Z)(i))return!1;l=!0,m=!1}if(x&&!m)return o||(o=new ie),l||(0,Ig.Z)(t)?In(t,i,e,n,r,o):function(t,i,e,n,r,o,l){switch(e){case"[object DataView]":if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=i.byteLength||!o(new se(t),new se(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,Re.Z)(+t,+i);case"[object Error]":return t.name==i.name&&t.message==i.message;case"[object RegExp]":case"[object String]":return t==i+"";case"[object Map]":var a=fg;case"[object Set]":if(a||(a=mg),t.size!=i.size&&!(1&n))return!1;var g=l.get(t);if(g)return g==i;n|=2,l.set(t,i);var m=In(a(t),a(i),n,r,o,l);return l.delete(t),m;case"[object Symbol]":if(We)return We.call(t)==We.call(i)}return!1}(t,i,d,e,n,r,o);if(!(1&e)){var A=m&&jn.call(t,"__wrapped__"),b=h&&jn.call(i,"__wrapped__");if(A||b){var _=A?t.value():t,L=b?i.value():i;return o||(o=new ie),r(_,L,e,n,o)}}return!!x&&(o||(o=new ie),function(t,i,e,n,r,o){var l=1&e,a=Le(t),d=a.length;if(d!=Le(i).length&&!l)return!1;for(var h=d;h--;){var x=a[h];if(!(l?x in i:Og.call(i,x)))return!1}var A=o.get(t),b=o.get(i);if(A&&b)return A==i&&b==t;var _=!0;o.set(t,i),o.set(i,t);for(var L=l;++h<d;){var w=t[x=a[h]],N=i[x];if(n)var ye=l?n(N,w,x,i,t,o):n(w,N,x,t,i,o);if(!(void 0===ye?w===N||r(w,N,e,n,o):ye)){_=!1;break}L||(L="constructor"==x)}if(_&&!L){var xe=t.constructor,ve=i.constructor;xe!=ve&&"constructor"in t&&"constructor"in i&&!("function"==typeof xe&&xe instanceof xe&&"function"==typeof ve&&ve instanceof ve)&&(_=!1)}return o.delete(t),o.delete(i),_}(t,i,e,n,r,o))},Ng=function Nn(t,i,e,n,r){return t===i||(null==t||null==i||!(0,Vt.Z)(t)&&!(0,Vt.Z)(i)?t!=t&&i!=i:jg(t,i,e,n,Nn,r))},Vg=function(t,i){return Ng(t,i)};function qg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}const pe=(t,i)=>t?pe(i%t,t):i,zg=(t,i)=>t*i/pe(t,i);let $g=(()=>{class t extends ue{constructor(e,n,r,o,l){super(e,n,r,o),this.network5And6Graph=l,this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0,red:0,green:0,blue:0},this.index=-1,this.maxShuffles=2500,this.name="Operant Choice",this.numAllottedTimeouts=1,this.numTimeouts=0,this.startInstructions="TAKE A BREAK. 17% COMPLETE. CLICK TO CONTINUE",this.stimuliComparisonCopies=2}get isComplete(){return this.sequentialCorrect>=2*this.trials.length||this.meetsMasterCriterion1&&this.meetsMasterCriterion2}get masterCriterion(){if(!this.studyConfig)throw Error("Study configuration is undefined");return{sequentialCorrectTarget:this.studyConfig.iCannotKnow?56:35,sequentialCorrectTargetAchieved:!1,comparisonTarget:24,iCannotKnowTarget:this.studyConfig.iCannotKnow?18:0,sameTarget:6}}get meetsMasterCriterion1(){const{sequentialCorrectTarget:e,sequentialCorrectTargetAchieved:n,comparisonTarget:r,iCannotKnowTarget:o,sameTarget:l}=this.masterCriterion,{greaterThan:a,iCannotKnow:d,lessThan:g,same:m}=this.correctCount;return this.sequentialCorrect===e&&(this.masterCriterion.sequentialCorrectTargetAchieved=!0),n||m>=l&&a+g>=r&&d>=o}get meetsMasterCriterion2(){return!!this.correctShownTargets&&this.correctCount.same>=this.correctShownTargets.same&&this.correctCount.lessThan>=this.correctShownTargets.lessThan&&this.correctCount.greaterThan>=this.correctShownTargets.greaterThan&&this.correctCount.iCannotKnow>=this.correctShownTargets.iCannotKnow}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){var e,n;const{studyConfig:r}=this;if(!r)throw Error("Study configuration is undefined");this.network5And6Graph.includeRelationsBetweenNetworks=r.iCannotKnow;const o=[this.network5And6Graph.trained,this.network5And6Graph.mutuallyEntailed].flat().concat(r.iCannotKnow?this.network5And6Graph.combinatoriallyEntailed:[]),l=f.Tz.reduce((A,b)=>Object.assign(Object.assign({},A),{[b]:o.filter(_=>_.relation===b)}),{}),a=f.Tz.reduce((A,b)=>Object.assign(Object.assign({},A),{[b]:o.filter(_=>_.relation===b).length}),{}),d=Object.values(a).filter(A=>A>0).reduce(zg),g=f.Tz.reduce((A,b)=>Object.assign(Object.assign({},A),{[b]:d/o.filter(_=>_.relation===b).length}),{}),m=Object.values(r.balance).filter(A=>A).reduce(pe);this.configBalanceDividedByGcd={different:0,same:r.balance.same/m,greaterThan:r.balance.greaterThan/m,lessThan:r.balance.lessThan/m,iCannotKnow:(null===(e=r.balance)||void 0===e?void 0:e.iCannotKnow)?r.balance.iCannotKnow/m:0};const h={different:0,same:r.balance.same*g.same,greaterThan:r.balance.greaterThan*g.greaterThan,lessThan:r.balance.lessThan*g.lessThan,iCannotKnow:(null===(n=r.balance)||void 0===n?void 0:n.iCannotKnow)?r.balance.iCannotKnow*g.iCannotKnow:0},x=Object.values(h).filter(A=>A).reduce(pe);for(const A of f.Tz){if(0===a[A])continue;const b=h[A]/x*this.stimuliComparisonCopies;for(let _=0;_<b;_++)this.trials=this.trials.concat(l[A].flat().map(L=>Object.assign(Object.assign({},L),{cueComponentConfigs:fe(r)})))}return this.shuffleUntilNoTriplicatesInARow(),this.trials}feedbackEnabled(){return!0}grade(e){var n,r,o,l,a,d,g,m,h,x;if(!this.trial)throw Error("Trial is undefined");const A=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;if((null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++,this.correctCount[e.cue.value]++):(this.sequentialCorrect=0,this.incorrect++),this.meetsMasterCriterion1&&!this.correctShownTargets)for(this.correctShownTargets={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0};this.correctShownTargets.same<this.correctCount.same||this.correctShownTargets.greaterThan<this.correctCount.greaterThan||this.correctShownTargets.lessThan<this.correctCount.lessThan||this.correctShownTargets.iCannotKnow<this.correctCount.iCannotKnow;){if(!this.configBalanceDividedByGcd)throw Error("Config balance has not been created");this.correctShownTargets={different:0,same:(null===(o=this.correctShownTargets)||void 0===o?void 0:o.same)+(null===(l=this.configBalanceDividedByGcd)||void 0===l?void 0:l.same),greaterThan:(null===(a=this.correctShownTargets)||void 0===a?void 0:a.greaterThan)+(null===(d=this.configBalanceDividedByGcd)||void 0===d?void 0:d.greaterThan),lessThan:(null===(g=this.correctShownTargets)||void 0===g?void 0:g.lessThan)+(null===(m=this.configBalanceDividedByGcd)||void 0===m?void 0:m.lessThan),iCannotKnow:(null===(h=this.correctShownTargets)||void 0===h?void 0:h.iCannotKnow)+(null===(x=this.configBalanceDividedByGcd)||void 0===x?void 0:x.iCannotKnow)}}return this.correctShownTargets&&A&&(null==e?void 0:e.cue)&&!["red","green","blue"].includes(e.cue.value)?this.correctCount[e.cue.value]<=this.correctShownTargets[e.cue.value]?"CORRECT":void 0:A?"CORRECT":"WRONG"}nextTrial(){this.isComplete?this.complete():(this.index==this.trials.length-1&&(this.index=-1),super.nextTrial())}ngOnDestroy(){this.timeout&&clearTimeout(this.timeout)}ngOnInit(){this.createTrials(),this.start()}reset(){this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0,red:0,green:0,blue:0},this.index=-1,this.correct=0,this.incorrect=0,this.setTimeout()}setTimeout(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.timeout&&clearTimeout(this.timeout),this.failSafeDuration=2*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3),this.timeout=setTimeout(()=>{var e;null===(e=this.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},this.failSafeDuration)}shuffleUntilNoTriplicatesInARow(){let e,n=0;for(let r=0;r<this.maxShuffles;r++){this.trials=(0,$.Z)(this.trials);for(const o of this.trials)if(Vg(o.stimuli,null==e?void 0:e.stimuli)?n++:(e=o,n=0),3===n)break;if(n)break}n>=3&&(this.containsSequentialTriplicates=!0)}start(){this.prompt(this.startInstructions,!1,J).subscribe(()=>{this.started.next(),this.nextTrial()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(z),s.Y36(mt.F),s.Y36(ft),s.Y36(K),s.Y36(pn))},t.\u0275cmp=s.Xpm({type:t,selectors:[["operant-choice-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,qg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,V],styles:[""],data:{animation:[]}}),t})();function Qg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Zg=(()=>{class t extends ue{constructor(e,n,r,o,l){super(e,n,r,o),this.network3And4Graph=l,this.name="Pre Test",this.numDuplicates=4}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study configuration is undefined");for(let n=0;n<this.numDuplicates;n++)this.trials=this.trials.concat([this.network3And4Graph.mutuallyEntailed,this.network3And4Graph.combinatoriallyEntailed].flat().map(r=>Object.assign(Object.assign({},r),{cueComponentConfigs:fe(e)})));return(0,$.Z)(this.trials)}ngOnInit(){this.start()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(z),s.Y36(mt.F),s.Y36(ft),s.Y36(K),s.Y36(qe))},t.\u0275cmp=s.Xpm({type:t,selectors:[["pre-test-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,Qg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,V],styles:[""],data:{animation:[]}}),t})();function Kg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Ug=(()=>{class t extends ue{constructor(e,n,r,o,l){super(e,n,r,o),this.network3And4Graph=l,this.name="Training Networks",this.numAllottedTimeouts=1,this.numIdkProbeTrials=5,this.numProbeDuplicates=4,this.numProbeTrials=104,this.numTimeouts=0,this.numTrainingDuplicates=2,this.numTrainingTrials=20,this.probeFailuresAllotted=2,this.probesFailed=0,this.sequentialCorrectTarget=23,this.startInstructions="TAKE A BREAK. 50% COMPLETE. CLICK TO CONTINUE"}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study configuration is undefined");let n=[];for(let o=0;o<this.numTrainingDuplicates;o++)n=n.concat([this.network3And4Graph.identities,this.network3And4Graph.trained].flat().map(l=>Object.assign(Object.assign({},l),{cueComponentConfigs:fe(e)})));if(n.length!==this.numTrainingTrials)throw Error(`Training trials length "${n.length}" doesn't equal specified length "${this.numTrainingTrials}"`);let r=[];for(let o=0;o<this.numProbeDuplicates;o++)r=r.concat([this.network3And4Graph.mutuallyEntailed,this.network3And4Graph.combinatoriallyEntailed].flat().map(l=>Object.assign(Object.assign({},l),{cueComponentConfigs:fe(e)})));if(r.length!==this.numProbeTrials)throw Error(`Probe trials length "${r.length}" doesn't equal specified length "${this.numIdkProbeTrials}"`);return(0,$.Z)(n).concat((0,$.Z)(r))}feedbackEnabled(){return this.index<this.numTrainingTrials}nextTrial(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.sequentialCorrect===this.sequentialCorrectTarget&&this.trialNum<=this.numTrainingTrials&&(this.index=this.numTrainingTrials-1),this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect&&this.sequentialCorrect!==this.sequentialCorrectTarget?(this.incrementTrainingAttempts(),this.reset(),super.nextTrial()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&this.percentCorrect<(this.studyConfig.iCannotKnow?90:67.5)?(this.probesFailed++,this.incrementProbeAttempts(),this.probesFailed===this.probeFailuresAllotted?this.failed():this.retry()):(this.trialNum===this.numTrainingTrials&&(this.timeout&&clearTimeout(this.timeout),this.correct=0,this.incorrect=0),super.nextTrial())}ngOnDestroy(){this.timeout&&clearTimeout(this.timeout)}ngOnInit(){this.start()}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.trials=this.createTrials(),this.setTimeout()}setTimeout(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.timeout&&clearTimeout(this.timeout),this.failSafeDuration=50*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3),this.timeout=setTimeout(()=>{var e;null===(e=this.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},50*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3))}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,J).subscribe(()=>{this.started.next(),this.nextTrial()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(z),s.Y36(mt.F),s.Y36(ft),s.Y36(K),s.Y36(qe))},t.\u0275cmp=s.Xpm({type:t,selectors:[["training-networks-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,Kg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,V],styles:[""],data:{animation:[]}}),t})();const Wg=["container"];function Jg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"mat-card",2),s.TgZ(1,"mat-card-title"),s._uU(2,"Welcome"),s.qZA(),s.TgZ(3,"mat-card-content",3),s._uU(4),s.qZA(),s.TgZ(5,"mat-card-actions"),s.TgZ(6,"button",4),s.NdJ("click",function(){return s.CHM(e),s.oxw().showPreSurvey()}),s._uU(7,"NEXT"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.xp6(4),s.hij(" ",e.instructions," ")}}let pt=class{constructor(i,e,n,r,o,l){this.document=i,this.componentFactoryResolver=e,this.dialog=n,this.reportSvc=r,this.studyConfigSvc=o,this.surveySvc=l,this.abandonmentEnabled=!1,this.blocks=[Zg,Ju,$g,Ug],this.complete=!1,this.instructions=Rn,this.showInstructions=!0}createBlockComponent(i){if(!this.container)throw Error("Container is undefined");const e=this.componentFactoryResolver.resolveComponentFactory(i);this.container.clear();const r=this.container.createComponent(e).instance;r.studyConfig=this.studyConfigSvc.config,r.started.pipe((0,gt.P)(),(0,ut.t)(this)).subscribe(()=>this.abandonmentEnabled=!0),r.completed.pipe((0,gt.P)(),(0,st.b)(({failed:o})=>{this.abandonmentEnabled=!1,o?this.showCompleteDialog("failed"):this.blocks.length?(this.nextBlock(),this.reportSvc.sendReport("block").then()):this.showCompleteDialog("complete")}),(0,ut.t)(this)).subscribe()}nextBlock(){this.showInstructions=!1;const i=this.blocks.shift();if(!i)throw Error("Block is undefined");this.createBlockComponent(i)}ngOnInit(){this.studyConfigSvc.loadStudyConfigFromParams().then()}showCompleteDialog(i){var e;const{participantId:n}=this.studyConfigSvc,r="abandoned"===i?`STUDY ABANDONED!\n\n PARTICIPANT ID:\n ${n}`:`THANKS FOR PARTICIPATING!\n\n PARTICIPANT ID:\n ${n}`;this.complete=!0,null===(e=this.container)||void 0===e||e.clear(),(0,Gt.H)(J).pipe((0,gt.P)(),(0,de.w)(()=>this.reportSvc.sendReport(i)),(0,de.w)(()=>"abandoned"!==i?this.surveySvc.showPostSurvey(n):[r]),(0,de.w)(()=>this.dialog.open(An,qt({text:r,disableClose:!0})).afterClosed())).subscribe()}showPreSurvey(){this.surveySvc.showPreSurvey(this.studyConfigSvc.participantId).subscribe(()=>this.nextBlock())}};pt.\u0275fac=function(i){return new(i||pt)(s.Y36(p.K0),s.Y36(s._Vd),s.Y36(z),s.Y36(ft),s.Y36(Ze.R),s.Y36(ze))},pt.\u0275cmp=s.Xpm({type:pt,selectors:[["study"]],viewQuery:function(i,e){if(1&i&&s.Gf(Wg,7,s.s_b),2&i){let n;s.iGM(n=s.CRH())&&(e.container=n.first)}},features:[s._Bn([])],decls:3,vars:1,consts:[["style","max-width: 400px",4,"ngIf"],["container",""],[2,"max-width","400px"],[2,"white-space","pre-line"],["color","primary","onclick","blur()","mat-button","",3,"click"]],template:function(i,e){1&i&&(s.YNc(0,Jg,8,1,"mat-card",0),s.GkF(1,null,1)),2&i&&s.Q6J("ngIf",e.showInstructions)},directives:[p.O5,U.a8,U.n5,U.dn,U.hq,yt.lW],styles:["[_nghost-%COMP%]{-webkit-box-align:center;-webkit-box-pack:center;align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}.mat-card[_ngcontent-%COMP%]{max-height:100%}.mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 80px);overflow:auto}"]}),pt=(0,H.gn)([(0,ut.c)(),(0,H.w6)("design:paramtypes",[Document,s._Vd,z,ft,Ze.R,ze])],pt);const Xg=[{path:"",component:pt}];let tf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[xn.Bz.forChild(Xg)],xn.Bz]}),t})();const Qt=new s.OlP("Stimulus case");let ef=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[mn,qe,pn,{provide:Qt,useValue:iu()}],imports:[[Al,p.ez,Cl,yt.ot,U.QW,wl,_l,tf,ru,Sl]]}),t})()},2151:function(Ae){(function(){"use strict";var it=function(c,y){return c.replace(/(^|-)/g,"$1\\u"+(y=y||"")).replace(/,/g,"\\u"+y)},u=it("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),p="a-z"+it("DF-F6,F8-FF","00"),s="A-Z"+it("C0-D6,D8-DE","00"),U=function(c,y,D,G){return c=c||u,y=y||p,D=D||s,G=G||"A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",{capitalize:new RegExp("(^|["+c+"])(["+y+"])","g"),pascal:new RegExp("(^|["+c+"])+(["+y+D+"])","g"),fill:new RegExp("["+c+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+y+"])","g"),improper:new RegExp("\\b("+G+")\\b","g"),relax:new RegExp("([^"+D+"])(["+D+"]*)(["+D+"])(?=[^"+D+"]|$)","g"),upper:new RegExp("^[^"+y+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+c+"]")}},R=U(),C={re:R,unicodes:it,regexps:U,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(c){return C.up.call(c.charAt(0))+c.slice(1)},decap:function(c){return C.low.call(c.charAt(0))+c.slice(1)},deapostrophe:function(c){return c.replace(R.apostrophe,"")},fill:function(c,y,D){return null!=y&&(c=c.replace(R.fill,function(G,I){return I?y+I:""})),D&&(c=C.deapostrophe(c)),c},prep:function(c,y,D,G){if(c=null==c?"":c+"",!G&&R.upper.test(c)&&(c=C.low.call(c)),!y&&!R.hole.test(c)){var I=C.fill(c," ");R.hole.test(I)&&(c=I)}return!D&&!R.room.test(c)&&(c=c.replace(R.relax,C.relax)),c},relax:function(c,y,D,G){return y+" "+(D?D+" ":"")+G}},P={_:C,of:function(c){for(var y=0,D=C.types.length;y<D;y++)if(P[C.types[y]].apply(P,arguments)===c)return C.types[y]},flip:function(c){return c.replace(/\w/g,function(y){return(y==C.up.call(y)?C.low:C.up).call(y)})},random:function(c){return c.replace(/\w/g,function(y){return(Math.round(Math.random())?C.up:C.low).call(y)})},type:function(c,y){P[c]=y,C.types.push(c)}},nt={lower:function(c,y,D){return C.fill(C.low.call(C.prep(c,y)),y,D)},snake:function(c){return P.lower(c,"_",!0)},constant:function(c){return P.upper(c,"_",!0)},camel:function(c){return C.decap(P.pascal(c))},kebab:function(c){return P.lower(c,"-",!0)},upper:function(c,y,D){return C.fill(C.up.call(C.prep(c,y,!1,!0)),y,D)},capital:function(c,y,D){return C.fill(C.prep(c).replace(R.capitalize,function(G,I,X){return I+C.up.call(X)}),y,D)},header:function(c){return P.capital(c,"-",!0)},pascal:function(c){return C.fill(C.prep(c,!1,!0).replace(R.pascal,function(y,D,G){return C.up.call(G)}),"",!0)},title:function(c){return P.capital(c).replace(R.improper,function(y,D,G,I){return G>0&&G<I.lastIndexOf(" ")?C.low.call(y):y})},sentence:function(c,y,D){return c=P.lower(c).replace(R.sentence,function(G,I,X){return I+C.up.call(X)}),y&&y.forEach(function(G){c=c.replace(new RegExp("\\b"+P.lower(G)+"\\b","g"),C.cap)}),D&&D.forEach(function(G){c=c.replace(new RegExp("(\\b"+P.lower(G)+"\\. +)(\\w)"),function(I,X,Ot){return X+C.low.call(Ot)})}),c}};for(var Q in nt.squish=nt.pascal,P.default=P,nt)P.type(Q,nt[Q]);var st="function"==typeof st?st:function(){};st(Ae.exports?Ae.exports=P:this.Case=P)}).call(this)}}]);